<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Committees</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link href="css/ratchet.min.css" rel="stylesheet">
    <link href="css/ratchet-theme-ios.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <script src="js/ratchet.min.js"></script>
  </head>
  <body>
    <header class="bar bar-nav bar-nav-blue">
      <h1 class="title">Committees</h1>
    </header>
    <nav class="bar bar-tab">
      <a class="tab-item" href="index.html" data-transition="fade">
        <span class="icon fa fa-home"></span>
        <span class="tab-label">Home</span>
      </a>
      <a class="tab-item" href="news.html">
        <span class="icon fa fa-newspaper-o"></span>
        <span class="tab-label">News</span>
      </a>
      <a class="tab-item" href="schedule.html">
        <span class="icon fa fa-calendar"></span>
        <span class="tab-label">Schedule</span>
      </a>
      <a class="tab-item active" href="committees.html" data-transition="fade">
        <span class="icon fa fa-users"></span>
        <span class="tab-label">Committees</span>
      </a>
      <a class="tab-item" href="settings.html" data-transition="fade">
        <span class="icon fa fa-cog"></span>
        <span class="tab-label">Settings</span>
      </a>
    </nav>

    <div class="content">
      <ul class="table-view" id="committees">

      </ul>
    </div>
    <script src="js/jquery.min.js"></script>
    <script>
      function httpGet(theUrl){
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", theUrl, false );
        xmlHttp.send( null );
        return xmlHttp.responseText;
      }
      function getCommitteeData(){
        var committeeData = JSON.parse(httpGet("http://matthewwang.me/omun/api/committees.json"));
        for (var key in committeeData){
          if (key != "structure"){
            $("#committees").append('<li class="table-view-cell media"><a class="navigate-right"><img class="media-object pull-left" src="' + committeeData[key]["image"] + '" height="42" width="42"><div class="media-body">' + committeeData[key]["name"] + '</div></a></li>');
            /*
            <li class="table-view-cell media">
              <a class="navigate-right">
                <img class="media-object pull-left" src="' + committeeData[key]["image"] + '" height="42" width="42">
                <div class="media-body">
                  ' + committeeData[key]["name"] + '
                </div>
              </a>
            </li>
            */
          }
        }
      }
      getCommitteeData();
      window.addEventListener('push', getCommitteeData);
    </script>
  </body>
</html>
